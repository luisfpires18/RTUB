@namespace RTUB.Shared
@*
    RoleBadge Component
    Displays a Bootstrap badge with the appropriate styling for a user role
    Supports tap-to-expand on mobile for long role names
*@

<span class="badge avatar-card-role-badge @GetRoleBadgeClass(Role) @AdditionalClasses" 
      style="@GetRoleBadgeStyle(Role)"
      tabindex="0"
      role="button"
      aria-expanded="false"
      title="@Role">
    @GetRoleIcon(Role)
</span>

@code {
    /// <summary>
    /// The role to display (e.g., "Owner", "Admin", "Member")
    /// </summary>
    [Parameter]
    public string Role { get; set; } = string.Empty;

    /// <summary>
    /// Additional CSS classes to apply to the badge
    /// </summary>
    [Parameter]
    public string AdditionalClasses { get; set; } = "";

    /// <summary>
    /// Returns the appropriate CSS class for the role badge
    /// </summary>
    private string GetRoleBadgeClass(string role)
    {
        return role switch
        {
            "Owner" => "bg-danger",      // Red
            "Admin" => "bg-success",     // Green
            "Member" => "",              // Custom blue color via style
            _ => "bg-secondary"
        };
    }

    /// <summary>
    /// Returns custom inline style for roles that need it
    /// </summary>
    private string GetRoleBadgeStyle(string role)
    {
        return role switch
        {
            "Member" => "background-color: #007bff; color: white;",
            _ => ""
        };
    }

    /// <summary>
    /// Returns the icon (first capital letter) for the role
    /// </summary>
    private string GetRoleIcon(string role)
    {
        return role switch
        {
            "Owner" => "O",
            "Admin" => "A",
            "Member" => "M",
            _ => role.Length > 0 ? role.Substring(0, 1).ToUpper() : ""
        };
    }
}
